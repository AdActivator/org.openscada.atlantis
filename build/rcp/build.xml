<?xml version="1.0"?>
<!-- ====================================================================== 
     Aug 24, 2006 11:41:47 AM                                                        

     OpenSCADA RCP Client    
     The OpenSCADA RCP Client
                   
     jens                                                                
     ====================================================================== -->
<project name="OpenSCADA RCP Client" default="default">
    <description>
            The OpenSCADA RCP Client
    </description>

	<property name="eclipse.home" value="/home/user/eclipse"/>
	<property name="eclipse.builder.version" value="_3.2.0.v20060603"/>
	<property name="buildDirectory" value="${basedir}/eclipse.build"/>
	<property name="configs" value="win32,win32,x86&amp;linux,gtk,x86&amp;macosx,carbon,ppc&amp;solaris,gtk,sparc"/>
	<property name="buildType" value="I"/>
	<property name="buildId" value="AutoBuild"/>
	
    <!-- ================================= 
          target: default              
         ================================= -->
    <target name="default" depends="init, build, package, win32installer" description="--> The OpenSCADA RCP Client">
        
    </target>
	
	<target name="init">
		<tstamp/>
	</target>

	<!-- - - - - - - - - - - - - - - - - - 
          target: build                      
         - - - - - - - - - - - - - - - - - -->
    <target name="build">
		<java jar="${eclipse.home}/startup.jar" failonerror="true" fork="true" dir="${eclipse.home}/plugins/org.eclipse.pde.build${eclipse.builder.version}/scripts" >
			<arg value="-application" />
    		<arg value="org.eclipse.ant.core.antRunner" />
			<arg value="-Dbuilder=${basedir}/ostc"/>
    		<arg value="-DbaseLocation=${eclipse.home}"/>
			<arg value="-DbuildDirectory=${buildDirectory}"/>
       		<arg value="-DbuildType=${buildType}"/>
    		<arg value="-DbuildId=${buildId}"/>
    	</java>
    </target>
   	
	<!-- - - - - - - - - - - - - - - - - - 
          target: package                      
         - - - - - - - - - - - - - - - - - -->
    <target name="package" depends="build">
    	<java jar="${eclipse.home}/startup.jar" failonerror="true" fork="true">
    		<arg value="-application" />
    	    <arg value="org.eclipse.ant.core.antRunner" />
    	    <arg value="-buildfile" />
	   		<arg value="${eclipse.home}/plugins/org.eclipse.pde.build${eclipse.builder.version}/scripts/productBuild/productBuild.xml" />
			<arg value="-Dbuilder=${basedir}/ostc"/>
    		<arg value="-DbaseLocation=${eclipse.home}"/>
    		<arg value="-DbuildDirectory=${buildDirectory}"/>
    		<arg value="-Dconfigs=${configs}"/>
       		<arg value="-DbuildType=${buildType}"/>
    		<arg value="-DbuildId=${buildId}"/>
    	</java>
    	<mkdir dir="${upload.base}/bin/ostc"/>
    	<copy todir="${upload.base}/bin/ostc">
    		<fileset dir="${buildDirectory}/${buildType}.${buildId}">
    			<include name="**/*"/>
    		</fileset>
    	</copy>
    	<move tofile="${upload.base}/bin/ostc/${buildId}-macosx.carbon.tar.gz" file="${upload.base}/bin/ostc/${buildId}-macosx.carbon.ppc.tar.gz"/>
    </target>

	<target name="win32installer" depends="package">
		<exec command="makensis">
			<arg value="-Dversion=${version}-${release}"/>
		</exec>
	</target>

</project>
