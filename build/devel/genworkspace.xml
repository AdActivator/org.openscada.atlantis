<?xml version="1.0"?>
<!-- ====================================================================== 
     atalantis_gen_workspace    
     Generate an Atlantis Development Workspace
                   
	 Jens Reimann <jens.reimann@inavare.net>
     ====================================================================== -->
<project name="genworkspace" default="default">
    <description>
            Generate an Atlantis Development Workspace
    </description>
	
	<property name="repository.base" value="https://svn.inavare.net/openscada"/>
	<property name="repository.module" value="${repository.base}/modules/atlantis"/>
	<property name="repository.external" value="${repository.base}/external"/>
	<property name="workspace.dir" value="/tmp/workspace.atlantis"/>
		
	<property name="svn.username" value=""/>
	<property name="svn.password" value=""/>
	
	<import file="../lib/libs.xml"/>
	
    <!-- ================================= 
          target: default              
         ================================= -->
    <target name="default" depends="init, checkout" description="--> Generate an Atlantis Development Workspace">
        <echo>Have a nice day ;-)</echo>
    </target>

    <!-- - - - - - - - - - - - - - - - - - 
          target: init                    
         - - - - - - - - - - - - - - - - - -->
    <target name="init">
    </target>

	<!-- ================================= 
          target: clean              
         ================================= -->
    <target name="clean" depends="" description="--> Clean up">
        <delete dir="${workspace.dir}"/>
    </target>

        	
	<!-- - - - - - - - - - - - - - - - - - 
          target: checkout                      
         - - - - - - - - - - - - - - - - - -->
    <target name="checkout">
		<export-external name="junit4"/>
		<export-external name="junit4"/>
		<export-module name="openscada_utils" source="utils"/>
    </target>

	<!-- = = = = = = = = = = = = = = = = =
          macrodef: export
         = = = = = = = = = = = = = = = = = -->
    <macrodef name="export">
        <attribute name="source"/>
        <attribute name="destination"/>
        <sequential>
			<svn username="${svn.username}" password="${svn.password}">
				<checkout url="@{source}" destPath="@{destination}"/>
			</svn>
        </sequential>
    </macrodef>

	<!-- = = = = = = = = = = = = = = = = =
          macrodef: export-module
         = = = = = = = = = = = = = = = = = -->
    <macrodef name="export-module">
		<attribute name="source"/>
        <attribute name="name"/>
        <sequential>
            <export source="${repository.module}/@{source}" destination="${workspace.dir}/@{name}"/>
        </sequential>
    </macrodef>

	<!-- = = = = = = = = = = = = = = = = =
          macrodef: export-external
         = = = = = = = = = = = = = = = = = -->
    <macrodef name="export-external">
        <attribute name="name"/>
        <sequential>
            <export source="${repository.external}/@{name}" destination="${workspace.dir}/ext_@{name}"/>
        </sequential>
    </macrodef>

</project>
