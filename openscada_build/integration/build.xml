<?xml version="1.0"?>
<!-- ====================================================================== 
     OpenSCADA Atlantis Integration Build    
     Building for the continous integraton server
                   
     jens                                                                
     ====================================================================== -->
<project name="OpenSCADA Atlantis Integration Build" default="default">
    <description>
            Building for the continous integraton server
    </description>

	<property name="url.base" value="http://openscada.org/download/atlantis/integration"/>
	<property name="deploy.base" value="/var/vhosts/openscada/download/atlantis/integration"/>
	
    <!-- ================================= 
          target: default              
         ================================= -->
    <target name="default" depends="init" description="--> Building for the continous integraton server">
        <ant dir="../release" antfile="build.xml">
        	<property name="deploy.dir" value="${deploy.base}/${DSTAMP}"/>
        	<property name="url.dir" value="${url.base}/${DSTAMP}"/>
        	<property name="release" value="-${DSTAMP}-integration"/>
       		<property name="buildType" value="I"/>
       		<property name="buildId" value="Integration-${DSTAMP}"/>
    	</ant>
    	
    	<exec executable="ln" dir="${deploy.base}">
    		<arg line="-snf"/>
    		<arg line="${DSTAMP}"/>
    		<arg line="latest"/>
    	</exec>
    	
    	<echo file="${deploy.base}/latest/latest.txt" message="${DSTAMP}"/>
    </target>
	
	<target name="rcp_only" depends="init">
        <ant dir="../release" antfile="build.xml" target="rcp">
        	<property name="deploy.dir" value="${deploy.base}/${DSTAMP}"/>
        	<property name="url.dir" value="${url.base}/${DSTAMP}"/>
        	<property name="release" value="-${DSTAMP}-integration"/>
       		<property name="buildType" value="I"/>
       		<property name="buildId" value="Integration-${DSTAMP}"/>
    	</ant>
	</target>

    <!-- - - - - - - - - - - - - - - - - - 
          target: init                      
         - - - - - - - - - - - - - - - - - -->
    <target name="init">
    	<tstamp/>
    </target>

</project>
