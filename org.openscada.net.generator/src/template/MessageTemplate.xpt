«IMPORT metamodel»

«EXTENSION template::GeneratorExtensions»

«DEFINE main FOR Model»
	«EXPAND main FOREACH this.packages()»
«ENDDEFINE»

«DEFINE main FOR Package»
	«EXPAND main FOREACH this.packages»
	«EXPAND javaClass FOREACH this.messages»
«ENDDEFINE»

«DEFINE javaClass FOR Message»
	«FILE this.typeFileNameFq() + ".java"»
		
		«IF this.package() != null»
		package «this.package().packageNameFq()»;
		«ENDIF»
		
		public class «name» {
		
			public static final int COMMAND_CODE = «this.messageCode»;
			
			public «name» ()
			{
			}
			
			«IF this.value==null»
			public static org.openscada.net.base.data.Message toMessage ()
			{
				return toMessage ( («name»)null ); 
			}
			
			public static org.openscada.net.base.data.Message toMessage ( final org.openscada.net.base.data.Message requestMessage )
			{
				return toMessage ( («name»)null, requestMessage ); 
			}
			«ENDIF»
			
			public static org.openscada.net.base.data.Message toMessage ( final «name» bean )
			{
				return toMessage ( bean, null );
			}
			
			public static org.openscada.net.base.data.Message toMessage ( «name» bean, final org.openscada.net.base.data.Message requestMessage )
			{
				org.openscada.net.base.data.Message message;

				if ( requestMessage == null )
				{				
					message = new org.openscada.net.base.data.Message ( COMMAND_CODE );
				}
				else
				{
					message = new org.openscada.net.base.data.Message ( COMMAND_CODE, requestMessage.getSequence () );
				}
				
				«IF this.value != null»
					message.setValues ( «this.value.typeClassNameFq()».toValue ( bean.getValue () ) );
				«ENDIF»
				
				return message;
			}
			
			public static «name» fromMessage ( final org.openscada.net.base.data.Message message )
			{
				«name» bean = new «name» ();
				
				«IF this.value != null »
				bean.setValue ( «this.value.typeClassNameFq()».fromValue ( message.getValues () ) );
				«ENDIF»
				
				return bean;
			}
			
			«IF this.value != null »
			public «name» ( final «this.value.typeClassNameFq()» value )
			{
				this.value = value;
			}
			
			private «this.value.typeClassNameFq()» value;
			
			public «this.value.typeClassNameFq()» getValue ()
			{
				return this.value;
			} 
			
			public void setValue ( final «this.value.typeClassNameFq()» value )
			{
				this.value = value;
			}
			
			«ELSE»
			
			«ENDIF»
			
			
		}
	«ENDFILE»
«ENDDEFINE»
