<?xml version="1.0"?>
<!-- ====================================================================== 
     ice-build-core
     OpenSCADA Atlantis
     
     Jens Reimann <jens.reimann@inavare.net>
     ====================================================================== -->
<project name="ice-build-core" default="default">
    <description>
            OpenSCADA Atlantis Project
    </description>

	<property name="build.root" location="../builder_atlantis"/>
	
	<property file="${build.root}/config/local.properties"/>
	<property file="${build.root}/config/build.properties"/>
	<property file="${build.root}/common/config/local.properties"/>
	<property file="${build.root}/common/config/build.properties"/>
	
	<property name="source.root" location=".."/>
	
	<import file="${build.root}/lib/lib.xml"/>
	
	<!-- ================================= 
          target: default              
         ================================= -->
    <target name="default" depends="generate" description="--> Copy and generate">
		<echo message="Selecting ice: ${ice.version}"/>
		<copy file="lib/Ice-${ice.version}.jar" tofile="lib/Ice.jar" overwrite="true"/>
    </target>

	
	<!-- ================================= 
          target: generate
         ================================= -->
    <target name="generate" depends="clean" description="--> Build SLICE">
		<delete dir="gensrc"/>
		<mkdir dir="gensrc"/>
    	<slice2java outputdir="gensrc" casesensitive="true">
			<meta value="true"/>
			<fileset dir="${source.root}/openscada_interface_ice">
				<include name="core/*.ice"/>
			</fileset>
		</slice2java>
    </target>
	
	<!-- ================================= 
          target: clean              
         ================================= -->
    <target name="clean" depends="" description="Clean up">
        <delete dir="gensrc"/>
    </target>


</project>