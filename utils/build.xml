<?xml version="1.0"?>
<!-- ====================================================================== 
     Dec 13, 2006 11:38:26 AM                                                        

     openscada_utils    
     OpenSCADA Atlantis Utilities Project
                   
     jens                                                                
     ====================================================================== -->
<project name="openscada_utils" default="default">
    <description>
            OpenSCADA Atlantis Utilities Project
    </description>
	
	<import file="../build/lib/build.xml"/>
	<property name="package" value="openscada-utils"/>

    <!-- ================================= 
          target: default              
         ================================= -->
    <target name="default" depends="clean, deploy" description="--> OpenSCADA Atlantis Utilities Project">
        
    </target>

    <!-- - - - - - - - - - - - - - - - - - 
          target: init                      
         - - - - - - - - - - - - - - - - - -->
    <target name="init">
    </target>
	
	<!-- ================================= 
          target: clean              
         ================================= -->
    <target name="clean" depends="init" description="--> Clean Up">
        <delete dir="${build.dir}"/>
		<delete dir="bin"/>
    </target>
	
	<!-- ================================= 
          target: prepare              
         ================================= -->
    <target name="prepare" depends="init" description="--> Prepare It">
        <mkdir dir="${build.dir}"/>
		<openscada.prepare-local-libs/>
		<openscada.pull-in-external-lib name="log4j"/>
		<openscada.pull-in-external-lib name="junit4"/>
    </target>

	<!-- ================================= 
          target: build              
         ================================= -->
    <target name="build" depends="init, prepare" description="--> Build It">
		<!-- compile stuff -->
		<mkdir dir="bin"/>
		<javac
			encoding="utf-8"
			source="1.5"
			target="1.5"
			srcdir="src"
			destdir="bin"
			>
			<classpath>
				<fileset dir="${build.dir}/lib">
					<include name="**/*.jar"/>
				</fileset>
			</classpath>
		</javac>

		<!-- generate javadoc -->
	   	<mkdir dir="docs/api"/>
  		<javadoc destdir="docs/api"
	       	author="true"
	       	version="true"
	       	use="true"
	       	encoding="utf-8"
	       	>
	       	<tag name="note" description="Note" scope="all"/>
	       	<tag name="warning" description="Warning" scope="all"/>
	       	<packageset dir="src" defaultexcludes="yes">
	       		<include name="**"/>
	       	</packageset>
			<classpath>
				<fileset dir="${build.dir}/lib">
					<include name="*.jar"/>
				</fileset>
	  		</classpath>
		</javadoc>
	
		<!-- export source -->
		<mkdir dir="${build.dir}/src"/>
		<copy todir="${build.dir}/src">
			<fileset dir="src">
				<include name="**/*.java"/>
				<exclude name="**/.svn"/>
			</fileset>
		</copy>
	
		<!-- export license -->
		<copy file="COPYING" todir="${build.dir}"/>
    </target>
	
	<!-- ================================= 
          target: deploy              
         ================================= -->
    <target name="deploy" depends="build" description="--> Deploy It">
		<mkdir dir="${build.dir}/bin"/>
		<jar destfile="${build.dir}/bin/${package}-${tag}.jar">
			<fileset dir="bin">
				<include name="**/*.class"/>
			</fileset>
		</jar>

		<mkdir dir="${deploy.dir}"/>
		<zip basedir="${build.dir}" destfile="${deploy.dir}/${package}-${tag}.zip">
			<include name="**/*"/>
		</zip>
    </target>


</project>
